<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sala de Experimentos | Hub Criativo</title>

    <meta name="google-site-verification" content="ErVEI6PSCLIOVNvi7emQAXDZy1ymBm5hgW7NwRxecoY" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">

    <link rel="icon" type="image/png" href="imagens/logo.png">

    <style>
        #tubes-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            display: none;
        }
        [data-theme="tubes"] .snow-container,
        [data-theme="tubes"] .background-orb {
            display: none;
        }
    </style>
</head>

<body>

    <canvas id="tubes-canvas"></canvas>

    <!-- MODAL DE APRESENTAÇÃO - RETROSPECTIVA -->
    <div id="welcome-modal" class="welcome-overlay">
        <div class="welcome-backdrop" onclick="closeWelcomeModal()"></div>
        <div class="welcome-card glass-liquid">
            <button class="welcome-close" onclick="closeWelcomeModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            
            <div class="welcome-icon">
                <i class="fa-solid fa-clock-rotate-left"></i>
            </div>
            
            <h2 class="welcome-title">Retrospectiva</h2>
            <p class="welcome-subtitle">Sua jornada em números</p>
            
            <div class="welcome-content">
                <p>Acompanhe seu tempo explorando a Sala de Experimentos e descubra insights interessantes sobre sua atividade.</p>
                <div class="welcome-feature">
                    <i class="fa-solid fa-hourglass-start"></i>
                    <span>Disponível após <strong>1 hora</strong> de uso</span>
                </div>
                <div class="welcome-feature">
                    <i class="fa-solid fa-chart-simple"></i>
                    <span>Veja estatísticas e dados personalizados</span>
                </div>
                <div class="welcome-feature">
                    <i class="fa-solid fa-sparkles"></i>
                    <span>Descubra qual é seu projeto favorito</span>
                </div>
            </div>
            
            <button class="welcome-btn" onclick="closeWelcomeModal()">
                Explorar Agora
            </button>
        </div>
    </div>

    <div class="snow-container">
        <div class="snow-layer-1"></div>
        <div class="snow-layer-2"></div>
        <div class="snow-layer-3"></div>
    </div>

    <div class="background-orb orb-1"></div>
    <div class="background-orb orb-2"></div>

    <div class="theme-switcher glass-liquid">
        <button class="theme-btn" onclick="mudarTema('light')" data-tooltip="Claro">
            <i class="fa-regular fa-sun"></i>
        </button>
        <button class="theme-btn" onclick="mudarTema('dark')" data-tooltip="Escuro">
            <i class="fa-solid fa-moon"></i>
        </button>
        <button class="theme-btn" onclick="mudarTema('marine')" data-tooltip="Marinha">
            <i class="fa-solid fa-water"></i>
        </button>
        <button class="theme-btn" onclick="mudarTema('pastel')" data-tooltip="Pastel">
            <i class="fa-solid fa-ice-cream"></i>
        </button>
        <button class="theme-btn" onclick="mudarTema('newyear')" data-tooltip="Ano Novo">
            <i class="fa-regular fa-snowflake"></i>
        </button>
        <button class="theme-btn" onclick="mudarTema('tubes')" data-tooltip="Tubes">
            <i class="fa-solid fa-bezier-curve"></i>
        </button>
        <!-- Botão Retrospectiva Mobile (Só aparece no celular e após 1h) -->
        <button class="theme-btn retro-mobile" onclick="toggleRetrospective(true)" data-tooltip="Retrospectiva" style="display: none;">
            <i class="fa-solid fa-clock-rotate-left"></i>
        </button>
    </div>

    <div class="main-wrapper">
        <header>
            <div class="badge">v2.8</div>
            <h1>Sala de <span class="text-gradient">Experimentos</span></h1>
            <h2>Onde a criatividade encontra a <span class="text-highlight">tecnologia</span>.</h2>
        </header>

        <nav id="categorias-container">
            <button class="filter-btn active" onclick="filtrarPorCategoria('todos')"><i class="fa-solid fa-layer-group"></i> Todos</button>
            <button class="filter-btn" onclick="filtrarPorCategoria('ferramentas')"><i class="fa-solid fa-screwdriver-wrench"></i> Ferramentas</button>
            <button class="filter-btn" onclick="filtrarPorCategoria('jogos')"><i class="fa-solid fa-gamepad"></i> Jogos</button>
            <button class="filter-btn" onclick="filtrarPorCategoria('ia')"><i class="fa-solid fa-robot"></i> IA</button>
            <button class="filter-btn" onclick="filtrarPorCategoria('diversao')"><i class="fa-regular fa-face-laugh-beam"></i> Diversão</button>
            <button class="filter-btn special" onclick="window.location.href='equipe/equipe.html'"><i class="fa-solid fa-users"></i> Equipe</button>
        </nav>

        <div id="busca-container">
            <div class="input-wrapper">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="busca-input" placeholder="O que você procura hoje?">
            </div>
        </div>

        <div id="container-cards">
            <div class="glass-card" data-projeto="drive-mad" data-categoria="jogos">
                <div class="card-image-wrapper">
                    <img src="imagens/drive-mad.png" alt="Drive Mad" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Drive+Mad'">
                    <span class="status-tag dev">POPULAR</span>
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Drive Mad</h3>
                        <span class="category-icon"><i class="fa-solid fa-car"></i></span>
                    </div>
                    <p>Desafie a física em pistas insanas! Você consegue chegar à linha de chegada sem capotar?</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="drive-mad-count">0</span> vezes você usou</span>
                    </div>
                    <a href="drive-mad/index.html" onclick="atualizarEstatistica('drive-mad')" class="action-btn">Jogar Agora</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="escape-road" data-categoria="jogos">
                <div class="card-image-wrapper">
                    <img src="imagens/escape-road.png" alt="Escape Road" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Escape+Road'">
                    <span class="status-tag dev">NOVO</span>
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Escape Road</h3>
                        <span class="category-icon"><i class="fa-solid fa-road"></i></span>
                    </div>
                    <p>Fuja da perseguição em alta velocidade! Sobreviva o máximo que puder nas estradas perigosas.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="escape-road-count">0</span> vezes você usou</span>
                    </div>
                    <a href="escape-road/escape-road.html" onclick="atualizarEstatistica('escape-road')" class="action-btn">Fugir Agora</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="canvas" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                <img src="imagens/canvas.png" alt="Canvas" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Canvas'">
                <span class="status-tag dev">NOVO</span>
            </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Canvas</h3>
                        <span class="category-icon"><i class="fa-solid fa-pencil"></i></span>
                    </div>
                    <p>Uma plataforma para soltar sua imaginação e criar artes digitais incríveis.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="canvas-count">0</span> vezes você usou</span>
                    </div>
                    <a href="canvas/canvas.html" onclick="atualizarEstatistica('canvas')" class="action-btn">Criar Agora</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="converter" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                    <img src="imagens/converter.png" alt="Conversor de Moedas" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Converter'">
                    <span class="status-tag dev">NOVO</span>
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Conversor de Moedas</h3>
                        <span class="category-icon"><i class="fa-solid fa-coins"></i></span>
                    </div>
                    <p>Converta valores entre diferentes moedas globais com taxas atualizadas.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="converter-count">0</span> vezes você usou</span>
                    </div>
                    <a href="converter/converter.html" onclick="atualizarEstatistica('converter')" class="action-btn">Converter</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="dino" data-categoria="jogos">
                <div class="card-image-wrapper">
                    <img src="dino/dino.png" alt="Dino Game" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Dino'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Dino Game</h3>
                        <span class="category-icon"><i class="fa-solid fa-gamepad"></i></span>
                    </div>
                    <p>O clássico jogo do dinossauro do Chrome para jogar a qualquer momento.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="dino-count">0</span> vezes você usou</span>
                    </div>
                    <a href="dino/dino.html" onclick="atualizarEstatistica('dino')" class="action-btn">Jogar Agora</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="gerador-cores" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                    <img src="imagens/cor.png" alt="Gerador de Cores" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Gerador+de+Cores'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Gerador de Cores</h3>
                        <span class="category-icon"><i class="fa-solid fa-palette"></i></span>
                    </div>
                    <p>Gere paletas perfeitas respondendo perguntas simples — design inteligente e exportável.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="gerador-cores-count">0</span> vezes você usou</span>
                    </div>
                    <a href="gerador-cores/cor.html" onclick="atualizarEstatistica('gerador-cores')" class="action-btn">Acessar Projeto</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="agenda" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                    <img src="imagens/agenda.png" alt="Agenda Interativa" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Agenda'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Agenda Interativa</h3>
                        <span class="category-icon"><i class="fa-solid fa-calendar"></i></span>
                    </div>
                    <p>Organize seus compromissos e tarefas com uma agenda elegante e funcional.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="agenda-count">0</span> vezes você usou</span>
                    </div>
                    <a href="agenda/agenda.html" onclick="atualizarEstatistica('agenda')" class="action-btn">Acessar Agenda</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="senha" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                    <img src="imagens/senha.png" alt="Gerador de Senha" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Gerador+de+Senha'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Gerador de Senhas</h3>
                        <span class="category-icon"><i class="fa-solid fa-lock"></i></span>
                    </div>
                    <p>Crie senhas fortes e seguras com customização completa de caracteres.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="senha-count">0</span> vezes você usou</span>
                    </div>
                    <a href="senha/senha.html" onclick="atualizarEstatistica('senha')" class="action-btn">Gerar Senha</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="hacker" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                    <img src="imagens/neural.png" alt="Terminal Neural" onerror="this.src='https://placehold.co/600x400/000/0F0?text=Terminal+Neural'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Terminal Neural</h3>
                        <span class="category-icon"><i class="fa-solid fa-terminal"></i></span>
                    </div>
                    <p>Interface avançada para simulação e exploração de dados criptografados.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="hacker-count">0</span> vezes você usou</span>
                    </div>
                    <a href="hacker/hacker.html" onclick="atualizarEstatistica('hacker')" class="action-btn">Acessar Terminal</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="2027" data-categoria="diversao">
                <div class="card-image-wrapper">
                    <img src="2027/2027.png" alt="Tempo para 2027" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=2027'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Tempo para 2027</h3>
                        <span class="category-icon"><i class="fa-solid fa-clock"></i></span>
                    </div>
                    <p>Conta regressiva emocionante para o ano de 2027. Veja quanto tempo falta!</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="2027-count">0</span> vezes você usou</span>
                    </div>
                    <a href="2027/2027.html" onclick="atualizarEstatistica('2027')" class="action-btn">Ver Contagem</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="conversa" data-categoria="ia">
                <div class="card-image-wrapper">
                    <img src="Lhama-AI/logo.png" alt="Lhama AI" onerror="this.src='https://placehold.co/600x400/4b0082/FFF?text=Dora+AI'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Lhama AI 1</h3>
                        <span class="category-icon"><i class="fa-solid fa-brain"></i></span>
                    </div>
                    <p>Nova inteligência artificial, cada dia mais inteligente.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="conversa-count">0</span> vezes você usou</span>
                    </div>
                    <a href="Lhama-AI/conversa.html" onclick="atualizarEstatistica('conversa')" class="action-btn">Conversar</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="bilionario" data-categoria="diversao">
                <div class="card-image-wrapper">
                    <img src="imagens/elon-musk.png" alt="Bilionário" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Bilionario'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Compre como Elon Musk</h3>
                        <span class="category-icon"><i class="fa-solid fa-rocket"></i></span>
                    </div>
                    <p>O que você faria com quase 500 bilhões de Dólares?</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="bilionario-count">0</span> vezes você usou</span>
                    </div>
                    <a href="bilionário/bilionario.html" onclick="atualizarEstatistica('bilionario')" class="action-btn">Simular Vida Luxuosa</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="frases" data-categoria="diversao">
                <div class="card-image-wrapper">
                    <img src="imagens/frases.png" alt="Frases" onerror="this.src='https://placehold.co/600x400/ff6b6b/FFF?text=Motivacao'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Daily Motivation</h3>
                        <span class="category-icon"><i class="fa-solid fa-bolt"></i></span>
                    </div>
                    <p>Gerador de doses diárias de energia e sabedoria para começar o seu dia.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="frases-count">0</span> vezes você usou</span>
                    </div>
                    <a href="frases/frases.html" onclick="atualizarEstatistica('frases')" class="action-btn">Inspirar-se</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="mosquito" data-categoria="diversao">
                <div class="card-image-wrapper">
                    <img src="imagens/mosquito.png" alt="Mosquito" onerror="this.src='https://placehold.co/600x400/333/FFF?text=Mosquito'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Contador de Mosquitos</h3>
                        <span class="category-icon"><i class="fa-solid fa-crosshairs"></i></span>
                    </div>
                    <p>Ferramenta essencial para rastrear vitórias contra insetos locais.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="mosquito-count">0</span> vezes você usou</span>
                    </div>
                    <a href="contar_mosquitos/contar-mosquitos.html" onclick="atualizarEstatistica('mosquito')" class="action-btn">Iniciar Caçada</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="relogio" data-categoria="ferramentas">
                <div class="card-image-wrapper">
                    <img src="imagens/relogio.png" alt="Relógio Digital" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Relogio'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Relógio Universal</h3>
                        <span class="category-icon"><i class="fa-solid fa-globe"></i></span>
                    </div>
                    <p>Monitoramento global de fusos horários em tempo real.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="relogio-count">0</span> vezes você usou</span>
                    </div>
                    <a href="relógio/relogio.html" onclick="atualizarEstatistica('relogio')" class="action-btn">Acessar Projeto</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="advinhar" data-categoria="jogos">
                <div class="card-image-wrapper">
                    <img src="imagens/advinhar.png" alt="Adivinhar Quem" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Adivinhar'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Adivinho de Famosos</h3>
                        <span class="category-icon"><i class="fa-solid fa-brain"></i></span>
                    </div>
                    <p>Pense em um famoso e eu tentarei adivinhar quem é através de perguntas!</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="advinhar-count">0</span> vezes você usou</span>
                    </div>
                    <a href="advinhar/advinhar.html" onclick="atualizarEstatistica('advinhar')" class="action-btn">Jogar Agora</a>
                </div>
            </div>

            <div class="glass-card" data-projeto="marinho" data-categoria="diversao">
                <div class="card-image-wrapper">
                    <img src="imagens/marinho.png" alt="Animal Marinho" onerror="this.src='https://placehold.co/600x400/1a1a1a/FFF?text=Animal+Marinho'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <h3>Quiz Animal Marinho</h3>
                        <span class="category-icon"><i class="fa-solid fa-fish"></i></span>
                    </div>
                    <p>Descubra qual criatura do mar melhor representa sua personalidade.</p>
                    <div class="card-meta">
                        <span><i class="fa-regular fa-eye"></i> <span id="marinho-count">0</span> vezes você usou</span>
                    </div>
                    <a href="marinho/marinho.html" onclick="atualizarEstatistica('marinho')" class="action-btn">Descobrir</a>
                </div>
            </div>
        </div>
    </div>

    <!-- RETROSPECTIVA UI -->
    <button id="retro-trigger" onclick="toggleRetrospective(true)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <span>Acesse sua retrospectiva!</span>
    </button>

    <div id="retro-overlay" class="retro-hidden">
        <div class="retro-backdrop" onclick="toggleRetrospective(false)"></div>
        
        <div class="retro-card">
            <div class="retro-header">
                <div id="retro-icon-wrapper"></div>
                <h3 id="retro-card-title"></h3>
            </div>

            <div class="retro-content">
                <div class="retro-highlight" id="retro-stat"></div>
                <p class="retro-text" id="retro-desc"></p>
            </div>

            <div class="retro-footer">
                <button id="retro-btn-prev" onclick="navigateCard(-1)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                    Voltar
                </button>
                <div id="retro-dots" class="retro-dots-container"></div>
                <button id="retro-btn-next" onclick="navigateCard(1)">
                    Próximo
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                </button>
                <button id="retro-btn-close" onclick="toggleRetrospective(false)" style="display: none;">
                    Fechar
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        function mudarTema(tema) {
            document.documentElement.setAttribute('data-theme', tema);
            localStorage.setItem('site-theme', tema);
            atualizarBotoesTema(tema);
            
            const tubesCanvas = document.getElementById('tubes-canvas');
            if (tema === 'tubes') {
                if (tubesCanvas) tubesCanvas.style.display = 'block';
                initTubes();
            } else {
                if (tubesCanvas) tubesCanvas.style.display = 'none';
            }
        }

        function atualizarBotoesTema(temaAtivo) {
            const botoes = document.querySelectorAll('.theme-btn');
            botoes.forEach(btn => {
                btn.classList.remove('active');
                if(btn.onclick.toString().includes(temaAtivo)) {
                    btn.classList.add('active');
                }
            });
        }

        function formatarNumero(num) {
            return new Intl.NumberFormat('pt-BR', { notation: "compact", compactDisplay: "short" }).format(num);
        }

        function atualizarEstatistica(projeto) {
            let count = parseInt(localStorage.getItem(projeto) || 0) + 1;
            localStorage.setItem(projeto, count);
            atualizarDisplay(projeto, count);
        }

        function atualizarDisplay(projeto, valor) {
            const el = document.getElementById(projeto + '-count');
            if (el) el.textContent = formatarNumero(valor);
        }

        window.addEventListener('load', () => {
            // LISTA ATUALIZADA DE PROJETOS
            const projetos = ['drive-mad', 'escape-road', 'canvas', 'converter', 'dino', 'gerador-cores', 'senha', 'bilionario', 'conversa', 'frases', 'mosquito', 'relogio', 'agenda', 'advinhar', 'marinho', 'hacker'];
            
            projetos.forEach(proj => {
                let count = localStorage.getItem(proj) || 0;
                atualizarDisplay(proj, count);
            });

            const temaSalvo = localStorage.getItem('site-theme') || 'dark';
            mudarTema(temaSalvo);
        });

        document.getElementById('busca-input').addEventListener('input', function (e) {
            const termo = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.glass-card');
            cards.forEach(card => {
                const texto = card.innerText.toLowerCase();
                card.style.display = texto.includes(termo) ? 'flex' : 'none';
            });
        });

        function filtrarPorCategoria(categoria) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            if(event) event.currentTarget.classList.add('active');

            const cards = document.querySelectorAll('.glass-card');
            cards.forEach(card => {
                const cardCat = card.getAttribute('data-categoria');
                if (categoria === 'todos' || cardCat === categoria) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        let tubesInitialized = false;
        let tubesApp = null;

        async function initTubes() {
            if (tubesInitialized) return;
            
            try {
                const module = await import("https://cdn.jsdelivr.net/npm/threejs-components@0.0.19/build/cursors/tubes1.min.js");
                const TubesCursor = module.default;
                
                tubesApp = TubesCursor(document.getElementById('tubes-canvas'), {
                    tubes: {
                        colors: ["#f967fb", "#53bc28", "#6958d5"],
                        lights: {
                            intensity: 200,
                            colors: ["#83f36e", "#fe8a2e", "#ff008a", "#60aed5"]
                        }
                    }
                });
                
                tubesInitialized = true;

                document.body.addEventListener('click', () => {
                    if (document.documentElement.getAttribute('data-theme') === 'tubes' && tubesApp) {
                        const colors = randomColors(3);
                        const lightsColors = randomColors(4);
                        tubesApp.tubes.setColors(colors);
                        tubesApp.tubes.setLightsColors(lightsColors);
                    }
                });

            } catch (error) {
                console.error("Failed to load Tubes theme:", error);
            }
        }

        function randomColors(count) {
            return new Array(count)
                .fill(0)
                .map(() => "#" + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0'));
        }

        // --- LÓGICA REAL DA RETROSPECTIVA ---
        
        // 1. Monitoramento de Tempo e Horário
        let totalSeconds = parseInt(localStorage.getItem('site-time-spent') || 0);
        
        // Roda a cada segundo
        setInterval(() => {
            totalSeconds++;
            localStorage.setItem('site-time-spent', totalSeconds);
            
            // Monitora horário de pico (salva a hora atual a cada minuto)
            if (totalSeconds % 60 === 0) {
                const currentHour = new Date().getHours();
                let hourStats = JSON.parse(localStorage.getItem('site-hour-stats') || '{}');
                hourStats[currentHour] = (hourStats[currentHour] || 0) + 1;
                localStorage.setItem('site-hour-stats', JSON.stringify(hourStats));
            }

            checkRetroAvailability();
        }, 1000);

        // 2. Verifica se pode mostrar o botão (Regra de 1 Hora)
        function checkRetroAvailability() {
            const btnDesktop = document.getElementById('retro-trigger');
            const btnMobile = document.querySelector('.theme-btn.retro-mobile');
            
            // 3600 segundos = 1 hora
            if (totalSeconds >= 3600) {
                // Lógica de exibição baseada no CSS (Media Query controla quem aparece)
                // Mas precisamos remover o display:none inline ou adicionar classes
                if(window.innerWidth > 480) {
                    btnDesktop.style.display = 'flex';
                } else {
                    btnDesktop.style.display = 'none';
                }
                
                // Adiciona classe para o CSS controlar o mobile
                btnMobile.classList.add('unlocked');
            }
        }

        // Chama ao carregar e ao redimensionar
        window.addEventListener('resize', checkRetroAvailability);
        window.addEventListener('load', checkRetroAvailability);

        // 3. Geração de Dados Dinâmicos
        let retroData = [];

        function generateRetroData() {
            // Card 1: Tempo Total
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            
            // Card 2: Top 5 Projetos
            const projetos = ['drive-mad', 'escape-road', 'canvas', 'converter', 'dino', 'gerador-cores', 'senha', 'bilionario', 'conversa', 'frases', 'mosquito', 'relogio', 'agenda', 'advinhar', 'marinho', 'hacker'];
            let usageData = projetos.map(p => ({
                name: p.replace('-', ' ').toUpperCase(),
                count: parseInt(localStorage.getItem(p) || 0)
            })).sort((a, b) => b.count - a.count);

            let top5HTML = '<div class="retro-list">';
            usageData.slice(0, 5).forEach((item, index) => {
                if(item.count > 0) {
                    top5HTML += `<div class="retro-list-item"><span><span class="retro-rank">${index + 1}</span> ${item.name}</span> <span>${item.count}x</span></div>`;
                }
            });
            top5HTML += '</div>';
            if (usageData[0].count === 0) top5HTML = "<p>Você ainda não explorou o suficiente!</p>";

            // Card 3: Horário de Pico
            let hourStats = JSON.parse(localStorage.getItem('site-hour-stats') || '{}');
            let peakHour = Object.keys(hourStats).reduce((a, b) => hourStats[a] > hourStats[b] ? a : b, 12); // Default 12h
            let peakHourStr = `${peakHour}:00 - ${parseInt(peakHour)+1}:00`;

            // Card 4: Veredito (Baseado no mais usado)
            let topProject = usageData[0].name;
            let veredito = "O Explorador";
            let vereditoDesc = "Você gosta de navegar por tudo um pouco.";
            
            if (topProject.includes("LHAMA") || topProject.includes("CONVERSA")) {
                veredito = "O Filósofo Digital";
                vereditoDesc = "Você prefere conversar com IAs do que com humanos. Nós entendemos.";
            } else if (topProject.includes("DRIVE") || topProject.includes("DINO") || topProject.includes("ESCAPE")) {
                veredito = "O Adrenalina Pura";
                vereditoDesc = "Você veio aqui para jogar e quebrar recordes. Produtividade? O que é isso?";
            } else if (topProject.includes("HACKER") || topProject.includes("CANVAS")) {
                veredito = "O Criativo Tech";
                vereditoDesc = "Você usa as ferramentas para criar e explorar o sistema.";
            }

            return [
                {
                    title: "TEMPO DE JORNADA",
                    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
                    stat: `${hours}h ${minutes}m`,
                    desc: `Você investiu ${hours} horas e ${minutes} minutos neste universo digital.`,
                    gradient: "linear-gradient(135deg, #FF512F 0%, #DD2476 100%)"
                },
                {
                    title: "SEUS FAVORITOS",
                    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`,
                    stat: "Top 5",
                    desc: "",
                    customHTML: top5HTML,
                    gradient: "linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%)"
                },
                {
                    title: "HORÁRIO DE PICO",
                    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>`,
                    stat: peakHourStr,
                    desc: "Este é o horário que você costuma estar mais ativo por aqui.",
                    gradient: "linear-gradient(135deg, #000428 0%, #004e92 100%)"
                },
                {
                    title: "VEREDITO FINAL",
                    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>`,
                    stat: veredito,
                    desc: vereditoDesc,
                    gradient: "linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"
                }
            ];
        }

        let currentRetroIndex = 0;

        function toggleRetrospective(show) {
            const modal = document.getElementById('retro-overlay');
            if (show) {
                retroData = generateRetroData(); // Gera dados frescos ao abrir
                currentRetroIndex = 0;
                updateRetroCard();
                modal.classList.remove('retro-hidden');
            } else {
                modal.classList.add('retro-hidden');
            }
        }

        function navigateCard(direction) {
            const newIndex = currentRetroIndex + direction;
            if (newIndex >= 0 && newIndex < retroData.length) {
                currentRetroIndex = newIndex;
                updateRetroCard();
            }
        }

        function updateRetroCard() {
            const data = retroData[currentRetroIndex];
            const total = retroData.length;

            // Aplica o gradiente dinâmico no card
            const card = document.querySelector('.retro-card');
            card.style.background = data.gradient;

            // Reseta animações (remove e adiciona a classe para reiniciar)
            const header = document.querySelector('.retro-header');
            const content = document.querySelector('.retro-content');
            
            header.classList.remove('retro-anim-enter');
            content.classList.remove('retro-anim-enter');
            
            // Força o reflow para reiniciar a animação CSS
            void header.offsetWidth; 
            
            header.classList.add('retro-anim-enter');
            content.classList.add('retro-anim-enter');

            document.getElementById('retro-card-title').innerText = data.title;
            document.getElementById('retro-icon-wrapper').innerHTML = data.icon;
            document.getElementById('retro-stat').innerText = data.stat;
            
            // Verifica se tem HTML customizado (para listas) ou texto normal
            const descEl = document.getElementById('retro-desc');
            if (data.customHTML) {
                descEl.innerHTML = data.customHTML;
            } else {
                descEl.innerText = data.desc;
            }

            const btnPrev = document.getElementById('retro-btn-prev');
            const btnNext = document.getElementById('retro-btn-next');
            const btnClose = document.getElementById('retro-btn-close');

            btnPrev.disabled = currentRetroIndex === 0;

            if (currentRetroIndex === total - 1) {
                btnNext.style.display = 'none';
                btnClose.style.display = 'flex';
            } else {
                btnNext.style.display = 'flex';
                btnClose.style.display = 'none';
            }

            const dotsContainer = document.getElementById('retro-dots');
            dotsContainer.innerHTML = '';
            for (let i = 0; i < total; i++) {
                const dot = document.createElement('div');
                dot.className = `retro-dot ${i === currentRetroIndex ? 'active' : ''}`;
                dotsContainer.appendChild(dot);
            }
        }

        // ========================================
        // MODAL DE APRESENTAÇÃO - RETROSPECTIVA
        // ========================================

        function closeWelcomeModal() {
            const modal = document.getElementById('welcome-modal');
            modal.classList.add('hidden');
            localStorage.setItem('welcome-modal-closed', 'true');
        }

        function checkWelcomeModal() {
            // Verifica se o modal já foi fechado neste dispositivo
            const wasClosed = localStorage.getItem('welcome-modal-closed');
            
            if (!wasClosed) {
                // Mostra o modal pela primeira vez
                const modal = document.getElementById('welcome-modal');
                modal.classList.remove('hidden');
            } else {
                // Esconde o modal se já foi visto
                const modal = document.getElementById('welcome-modal');
                modal.classList.add('hidden');
            }
        }

        // Checa o modal quando a página carrega
        window.addEventListener('load', () => {
            checkWelcomeModal();
        });

        // Também verifica ao carregar se o usuário já viu (para garantir)
        document.addEventListener('DOMContentLoaded', () => {
            checkWelcomeModal();
        });
    </script>
</body>

</html>
</body>

</html>